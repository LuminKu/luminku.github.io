<img src="https://gitee.com/LuminKu/picture/raw/master/pictures/20260224234014060.png" alt=""  style="max-width: 100%;">

在 Windows 上控制 Ubuntu 24.04 桌面的自带远程分享功能，主要通过 Ubuntu 的 ‌**“桌面共享”**‌（Desktop Sharing）功能实现，该功能基于 GNOME 的远程桌面服务，使用 RDP 协议，与 Windows 自带的“远程桌面连接”客户端兼容。

以下是详细的操作步骤：

### 1. 在 Ubuntu 24.04 上配置桌面共享

1. ‌**打开设置**‌：点击桌面左上角的“活动”按钮，搜索并打开“‌**设置**‌”。
2. ‌**进入远程桌面**‌：在设置面板中，选择“‌**系统**‌” > “‌**远程桌面**‌”。
3. ‌启用桌面共享：
   - 开启“‌**桌面共享**‌”开关。
   - 开启“‌**远程控制**‌”开关（允许 Windows 端控制鼠标和键盘）。
4. ‌设置连接凭据‌：
   - 在“‌**登录详情**‌”部分，设置一个用于远程连接的‌**用户名**‌和‌**密码**‌。建议使用一个与当前登录用户不同的名称，以避免权限冲突。
   - 点击“‌**验证**‌”按钮确认设置。
5. ‌（推荐）解决密码重置问题‌：Ubuntu 重启后，桌面共享密码可能会重置。为避免此问题：
   - 打开终端，输入 `seahorse` 命令启动“‌**密码和密钥**‌”应用程序。
   - 在左侧找到“‌**默认密钥环**‌”（Default Keyring），右键选择“‌**更改密码**‌”。
   - 输入当前用户密码，然后将新密码字段留空，点击“‌**继续**‌”。
   - 重新设置一次“桌面共享”的密码（步骤 4）。
6. ‌**（可选）防止锁屏断开连接**‌：如果 Ubuntu 锁屏，远程连接可能会断开。建议在“‌**设置**‌” > “‌**电源**‌”中，将“‌**息屏**‌”和“‌**自动挂起**‌”都设置为“‌**从不**‌”。

### 2. 在 Windows 上连接 Ubuntu 桌面

1. ‌**获取 Ubuntu 的 IP 地址**‌：在 Ubuntu 的终端中输入 `ip addr show`，查找 `inet` 后面的 IP 地址（通常是 `192.168.x.x` 格式）。
2. ‌**打开远程桌面连接**‌：在 Windows 上，按 `Win + R` 键，输入 `mstsc`，然后按回车。
3. ‌输入连接信息‌：
   - 在“计算机”字段中，输入 Ubuntu 的 ‌**IP 地址**‌。
   - 默认端口为 ‌**3390**‌（注意：这不是 RDP 的标准 3389 端口，因为 Ubuntu 的桌面共享服务使用 3390）。如果连接失败，可以尝试在 IP 地址后加上 `:3390`，例如 `192.168.1.100:3390`。
4. ‌**连接并登录**‌：点击“连接”按钮，输入在 Ubuntu 中设置的用户名和密码，即可成功连接到 Ubuntu 桌面。

### 重要提示

- ‌**网络要求**‌：Windows 和 Ubuntu 必须在同一局域网内，或通过 VPN 等方式互通。
- ‌**防火墙**‌：Ubuntu 默认的 `ufw` 防火墙通常会自动允许桌面共享的端口（3390），如遇连接问题，可运行 `sudo ufw allow 3390/tcp` 命令。
- ‌**协议区别**‌：Ubuntu 24.04 的“桌面共享”功能与“远程登录”（Remote Login）是两个独立功能。“远程登录”会强制注销当前用户会话，而“桌面共享”允许你查看和控制当前正在运行的桌面会话，体验更佳。‌