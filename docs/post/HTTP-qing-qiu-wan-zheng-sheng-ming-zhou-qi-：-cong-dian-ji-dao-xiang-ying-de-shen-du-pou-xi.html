<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/240149665?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="> 
> æˆ‘ä»¬ä»ä¸€ä¸ªç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®å¼€å§‹ï¼Œç›´åˆ°æ”¶åˆ°å“åº”ä¸ºæ­¢ï¼Œè¯¦ç»†å‰–ææ•´ä¸ªè¿‡ç¨‹ä¸­çš„åº•å±‚åŸç†ã€‚">
<meta property="og:title" content="HTTPè¯·æ±‚å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»ç‚¹å‡»åˆ°å“åº”çš„æ·±åº¦å‰–æ">
<meta property="og:description" content="> 
> æˆ‘ä»¬ä»ä¸€ä¸ªç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®å¼€å§‹ï¼Œç›´åˆ°æ”¶åˆ°å“åº”ä¸ºæ­¢ï¼Œè¯¦ç»†å‰–ææ•´ä¸ªè¿‡ç¨‹ä¸­çš„åº•å±‚åŸç†ã€‚">
<meta property="og:type" content="article">
<meta property="og:url" content="https://luminku.github.io/post/HTTP-qing-qiu-wan-zheng-sheng-ming-zhou-qi-%EF%BC%9A-cong-dian-ji-dao-xiang-ying-de-shen-du-pou-xi.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/240149665?v=4">
<title>HTTPè¯·æ±‚å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»ç‚¹å‡»åˆ°å“åº”çš„æ·±åº¦å‰–æ</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">HTTPè¯·æ±‚å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»ç‚¹å‡»åˆ°å“åº”çš„æ·±åº¦å‰–æ</h1>
<div class="title-right">
    <a href="https://luminku.github.io" id="buttonHome" class="btn btn-invisible circle" title="é¦–é¡µ">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/LuminKu/luminku.github.io/issues/8" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="åˆ‡æ¢ä¸»é¢˜">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><blockquote>
<p>æˆ‘ä»¬ä»ä¸€ä¸ªç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®å¼€å§‹ï¼Œç›´åˆ°æ”¶åˆ°å“åº”ä¸ºæ­¢ï¼Œè¯¦ç»†å‰–ææ•´ä¸ªè¿‡ç¨‹ä¸­çš„åº•å±‚åŸç†ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠæ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç½‘ç»œã€æµè§ˆå™¨å¼•æ“ã€æœåŠ¡å™¨å¤„ç†ç­‰å¤šä¸ªå±‚é¢ã€‚</p>
<p>æ­¥éª¤æ¦‚è§ˆï¼š</p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®ï¼Œè§¦å‘JavaScriptäº‹ä»¶ã€‚</li>
<li>Axiosåº“å°†è¯·æ±‚å°è£…æˆXMLHttpRequestæˆ–Fetch APIï¼ˆç°ä»£æµè§ˆå™¨ï¼‰å‘é€ã€‚</li>
<li>æµè§ˆå™¨è§£æURLï¼Œæ„é€ HTTPè¯·æ±‚ã€‚</li>
<li>æµè§ˆå™¨æŸ¥è¯¢DNSï¼Œå°†åŸŸåè§£æä¸ºIPåœ°å€ã€‚</li>
<li>æµè§ˆå™¨ä¸æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼ˆå¯èƒ½ç»è¿‡TLSåŠ å¯†ï¼‰ã€‚</li>
<li>æµè§ˆå™¨å‘é€HTTPè¯·æ±‚ã€‚</li>
<li>æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼ˆSpringBootåº”ç”¨ï¼‰ã€‚</li>
<li>æœåŠ¡å™¨è¿”å›HTTPå“åº”ã€‚</li>
<li>æµè§ˆå™¨æ¥æ”¶å“åº”ï¼Œè§£æå†…å®¹ã€‚</li>
<li>æµè§ˆå™¨è§¦å‘å›è°ƒå‡½æ•°ï¼Œæ›´æ–°é¡µé¢ã€‚</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è®²è§£æ¯ä¸ªæ­¥éª¤ã€‚</p>
<h2>1. ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®</h2>
<p>ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘ä¸€ä¸ªJavaScriptäº‹ä»¶ã€‚ä¾‹å¦‚ï¼š</p>
<p>javascript</p>
<pre class="notranslate"><code class="notranslate">document.getElementById('submitBtn').addEventListener('click', function() {
    // ä½¿ç”¨Axioså‘é€è¯·æ±‚
    axios.post('/api/submit', data)
        .then(response =&gt; {
            // å¤„ç†å“åº”
        })
        .catch(error =&gt; {
            // å¤„ç†é”™è¯¯
        });
});
</code></pre>
<h2>2. Axioså‘é€è¯·æ±‚</h2>
<p>Axiosæ˜¯ä¸€ä¸ªåŸºäºPromiseçš„HTTPå®¢æˆ·ç«¯ï¼Œå®ƒå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’ŒNode.jsä¸­ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå®ƒä½¿ç”¨XMLHttpRequestæˆ–Fetch APIï¼ˆæ ¹æ®ç¯å¢ƒæ”¯æŒï¼‰æ¥å‘é€è¯·æ±‚ã€‚</p>
<p>ä»¥XMLHttpRequestä¸ºä¾‹ï¼ŒAxiosä¼šåˆ›å»ºä¸€ä¸ªXMLHttpRequestå®ä¾‹ï¼Œé…ç½®è¯·æ±‚æ–¹æ³•ã€URLã€å¤´éƒ¨å’Œè¯·æ±‚ä½“ï¼Œç„¶åå‘é€è¯·æ±‚ã€‚</p>
<p>ä½†æ˜¯ï¼Œç°ä»£æµè§ˆå™¨æ›´æ¨èä½¿ç”¨Fetch APIï¼Œå®ƒæ˜¯æ›´ç°ä»£ã€åŠŸèƒ½æ›´å¼ºå¤§çš„æ›¿ä»£å“ã€‚Axiosåœ¨æµè§ˆå™¨ä¸­å¯èƒ½ä¼šæ ¹æ®æƒ…å†µé€‰æ‹©ä½¿ç”¨XMLHttpRequestæˆ–Fetch APIã€‚</p>
<h2>3. æµè§ˆå™¨è§£æURL</h2>
<p>æµè§ˆå™¨è§£æURLï¼Œç¡®å®šåè®®ã€ä¸»æœºã€ç«¯å£å’Œè·¯å¾„ã€‚å¦‚æœURLä¸åˆæ³•ï¼Œæµè§ˆå™¨ä¼šæŠ¥é”™ã€‚</p>
<h2>4. DNSæŸ¥è¯¢</h2>
<p>æµè§ˆå™¨æ£€æŸ¥åŸŸåæ˜¯å¦åœ¨ç¼“å­˜ä¸­ï¼ˆæµè§ˆå™¨ç¼“å­˜ã€æ“ä½œç³»ç»Ÿç¼“å­˜ã€hostsæ–‡ä»¶ç­‰ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å‘é…ç½®çš„DNSæœåŠ¡å™¨å‘é€DNSæŸ¥è¯¢è¯·æ±‚ã€‚</p>
<p>DNSæŸ¥è¯¢è¿‡ç¨‹ï¼š</p>
<ul>
<li>æµè§ˆå™¨ç¼“å­˜ -&gt; æ“ä½œç³»ç»Ÿç¼“å­˜ -&gt; æœ¬åœ°DNSæœåŠ¡å™¨ -&gt; é€’å½’æŸ¥è¯¢ -&gt; æ ¹DNS -&gt; é¡¶çº§åŸŸDNS -&gt; æƒå¨DNS<br>
æœ€ç»ˆè·å¾—ç›®æ ‡æœåŠ¡å™¨çš„IPåœ°å€ã€‚</li>
</ul>
<h2>5. å»ºç«‹TCPè¿æ¥</h2>
<p>æµè§ˆå™¨ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„Socket APIï¼Œä¸æœåŠ¡å™¨IPåœ°å€å’Œç«¯å£ï¼ˆHTTPé»˜è®¤80ï¼ŒHTTPSé»˜è®¤443ï¼‰å»ºç«‹TCPè¿æ¥ã€‚</p>
<p>å»ºç«‹TCPè¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯å‘é€SYNåŒ…åˆ°æœåŠ¡å™¨ï¼Œåºåˆ—å·ä¸ºéšæœºæ•°xã€‚</li>
<li>æœåŠ¡å™¨è¿”å›SYN-ACKåŒ…ï¼Œåºåˆ—å·ä¸ºéšæœºæ•°yï¼Œç¡®è®¤å·ä¸ºx+1ã€‚</li>
<li>å®¢æˆ·ç«¯å‘é€ACKåŒ…ï¼Œç¡®è®¤å·ä¸ºy+1ã€‚</li>
</ul>
<p>å¦‚æœæ˜¯HTTPSï¼Œåœ¨TCPè¿æ¥å»ºç«‹åï¼Œè¿˜éœ€è¦è¿›è¡ŒTLSæ¡æ‰‹ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯å‘é€ClientHelloï¼ŒåŒ…å«æ”¯æŒçš„TLSç‰ˆæœ¬ã€åŠ å¯†å¥—ä»¶ã€éšæœºæ•°ç­‰ã€‚</li>
<li>æœåŠ¡å™¨è¿”å›ServerHelloï¼Œç¡®è®¤TLSç‰ˆæœ¬ã€åŠ å¯†å¥—ä»¶ã€éšæœºæ•°ï¼Œå¹¶å‘é€è¯ä¹¦ã€‚</li>
<li>å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆé¢„ä¸»å¯†é’¥ï¼Œç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†åå‘é€ã€‚</li>
<li>æœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†å¾—åˆ°é¢„ä¸»å¯†é’¥ï¼ŒåŒæ–¹æ ¹æ®éšæœºæ•°å’Œé¢„ä¸»å¯†é’¥ç”Ÿæˆä¼šè¯å¯†é’¥ã€‚</li>
<li>åç»­é€šä¿¡ä½¿ç”¨å¯¹ç§°åŠ å¯†ã€‚</li>
</ul>
<h2>6. æµè§ˆå™¨å‘é€HTTPè¯·æ±‚</h2>
<p>æµè§ˆå™¨å°†è¯·æ±‚å°è£…æˆHTTPæŠ¥æ–‡ï¼Œé€šè¿‡TCPè¿æ¥å‘é€ã€‚HTTPæŠ¥æ–‡åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯·æ±‚è¡Œï¼ˆæ–¹æ³•ã€URLã€åè®®ç‰ˆæœ¬ï¼‰</li>
<li>è¯·æ±‚å¤´ï¼ˆå¦‚Content-Typeã€Cookieã€User-Agentç­‰ï¼‰</li>
<li>ç©ºè¡Œ</li>
<li>è¯·æ±‚ä½“ï¼ˆå¦‚æœæœ‰ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<p>text</p>
<pre class="notranslate"><code class="notranslate">POST /api/submit HTTP/1.1
Host: example.com
Content-Type: application/json
Cookie: name=value

{"key":"value"}
</code></pre>
<h2>7. æœåŠ¡å™¨å¤„ç†è¯·æ±‚</h2>
<p>è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œç»è¿‡ç½‘ç»œæ ˆï¼ˆæ“ä½œç³»ç»Ÿå±‚é¢ï¼‰åˆ°è¾¾ç›‘å¬å¯¹åº”ç«¯å£çš„è¿›ç¨‹ï¼ˆå¦‚SpringBootåº”ç”¨ï¼‰ã€‚</p>
<p>SpringBootå†…åµŒçš„TomcatæœåŠ¡å™¨ä¼šå¤„ç†è¿™ä¸ªè¿æ¥ï¼š</p>
<ul>
<li>Tomcatä»Socketä¸­è¯»å–æ•°æ®ï¼Œè§£æHTTPè¯·æ±‚ï¼Œå°è£…æˆHttpServletRequestå¯¹è±¡ã€‚</li>
<li>æ ¹æ®URLæ˜ å°„åˆ°å¯¹åº”çš„Controlleræ–¹æ³•ã€‚</li>
<li>æ‰§è¡Œæ–¹æ³•ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè®¿é—®æ•°æ®åº“ç­‰ã€‚</li>
<li>å°†è¿”å›ç»“æœå°è£…æˆHttpServletResponseï¼Œç„¶åè½¬æ¢æˆHTTPå“åº”æŠ¥æ–‡ã€‚</li>
</ul>
<h2>8. æœåŠ¡å™¨è¿”å›HTTPå“åº”</h2>
<p>æœåŠ¡å™¨å°†HTTPå“åº”æŠ¥æ–‡é€šè¿‡TCPè¿æ¥å‘é€å›æµè§ˆå™¨ã€‚HTTPå“åº”æŠ¥æ–‡åŒ…æ‹¬ï¼š</p>
<ul>
<li>çŠ¶æ€è¡Œï¼ˆåè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€æè¿°ï¼‰</li>
<li>å“åº”å¤´ï¼ˆå¦‚Content-Typeã€Set-Cookieç­‰ï¼‰</li>
<li>ç©ºè¡Œ</li>
<li>å“åº”ä½“ï¼ˆå¦‚HTMLã€JSONç­‰ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<p>text</p>
<pre class="notranslate"><code class="notranslate">HTTP/1.1 200 OK
Content-Type: application/json
Set-Cookie: name=value

{"status":"success"}
</code></pre>
<h2>9. æµè§ˆå™¨æ¥æ”¶å“åº”</h2>
<p>æµè§ˆå™¨ä»TCPè¿æ¥ä¸­è¯»å–æ•°æ®ï¼Œè§£æHTTPå“åº”ã€‚æ ¹æ®å“åº”å¤´ä¸­çš„Content-Typeå†³å®šå¦‚ä½•å¤„ç†å“åº”ä½“ã€‚</p>
<p>å¦‚æœå“åº”æ˜¯HTMLï¼Œæµè§ˆå™¨ä¼šè§£æHTMLï¼Œæ„å»ºDOMæ ‘ï¼Œç„¶ååŠ è½½å¼•ç”¨çš„CSSã€JavaScriptã€å›¾ç‰‡ç­‰èµ„æºï¼Œè¿›è¡Œæ¸²æŸ“ã€‚<br>
å¦‚æœå“åº”æ˜¯JSONï¼Œæµè§ˆå™¨ä¼šè§¦å‘XMLHttpRequestæˆ–Fetchçš„å›è°ƒï¼Œå°†JSONæ•°æ®ä¼ é€’ç»™JavaScriptã€‚</p>
<h2>10. æµè§ˆå™¨è§¦å‘å›è°ƒå‡½æ•°ï¼Œæ›´æ–°é¡µé¢</h2>
<p>åœ¨Axiosçš„thenå›è°ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°å“åº”æ•°æ®ï¼Œç„¶åä½¿ç”¨JavaScriptæ›´æ–°é¡µé¢å†…å®¹ã€‚</p>
<h2>åº•å±‚æŠ€æœ¯ç»†èŠ‚</h2>
<h3>æµè§ˆå™¨ä¸­çš„ç½‘ç»œè¯·æ±‚å®ç°</h3>
<p>æµè§ˆå™¨ä½¿ç”¨å¤šè¿›ç¨‹æ¶æ„ï¼ŒåŒ…æ‹¬æµè§ˆå™¨è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ã€GPUè¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹ç­‰ã€‚ç½‘ç»œè¯·æ±‚ä¸»è¦ç”±ç½‘ç»œè¿›ç¨‹è´Ÿè´£ã€‚</p>
<p>å½“æ¸²æŸ“è¿›ç¨‹ä¸­çš„JavaScriptä»£ç å‘èµ·ç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¼šé€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å°†è¯·æ±‚å‘é€ç»™ç½‘ç»œè¿›ç¨‹ã€‚ç½‘ç»œè¿›ç¨‹è´Ÿè´£DNSæŸ¥è¯¢ã€å»ºç«‹TCPè¿æ¥ã€å‘é€HTTPè¯·æ±‚ã€æ¥æ”¶å“åº”ç­‰ã€‚</p>
<h3>æ“ä½œç³»ç»Ÿä¸­çš„ç½‘ç»œæ ˆ</h3>
<p>æ“ä½œç³»ç»Ÿçš„ç½‘ç»œæ ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li>Socketå±‚ï¼šæä¾›Socket APIç»™åº”ç”¨ç¨‹åºã€‚</li>
<li>TCP/UDPå±‚ï¼šå®ç°ä¼ è¾“å±‚åè®®ã€‚</li>
<li>IPå±‚ï¼šå®ç°ç½‘ç»œå±‚åè®®ï¼Œè´Ÿè´£è·¯ç”±å’Œå¯»å€ã€‚</li>
<li>æ•°æ®é“¾è·¯å±‚ï¼šå¦‚ä»¥å¤ªç½‘åè®®ã€‚</li>
<li>ç‰©ç†å±‚ï¼šç½‘å¡ã€ç½‘çº¿ç­‰ç¡¬ä»¶ã€‚</li>
</ul>
<p>å½“æµè§ˆå™¨è°ƒç”¨Socket APIå‘é€æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šç»è¿‡æ“ä½œç³»ç»Ÿçš„ç½‘ç»œæ ˆï¼Œè¢«å°è£…æˆTCPæ®µã€IPåŒ…ã€ä»¥å¤ªç½‘å¸§ï¼Œç„¶åé€šè¿‡ç½‘å¡å‘é€åˆ°ç½‘ç»œã€‚</p>
<h3>ç¡¬ä»¶å±‚é¢</h3>
<p>ç½‘å¡å°†æ•°å­—ä¿¡å·è½¬æ¢æˆç”µä¿¡å·æˆ–å…‰ä¿¡å·ï¼Œé€šè¿‡ç‰©ç†ä»‹è´¨ï¼ˆå¦‚ç½‘çº¿ã€å…‰çº¤ï¼‰ä¼ è¾“ã€‚ç»è¿‡è·¯ç”±å™¨ã€äº¤æ¢æœºç­‰ç½‘ç»œè®¾å¤‡ï¼Œæœ€ç»ˆåˆ°è¾¾æœåŠ¡å™¨ã€‚</p>
<p>æœåŠ¡å™¨ç½‘å¡æ¥æ”¶åˆ°ä¿¡å·ï¼Œè½¬æ¢æˆæ•°å­—æ•°æ®ï¼Œç„¶åé€šè¿‡æ“ä½œç³»ç»Ÿçš„ç½‘ç»œæ ˆå‘ä¸Šä¼ é€’åˆ°åº”ç”¨ç¨‹åºã€‚</p>
<h2>å›¾æ–‡ç»“åˆ</h2>
<p>ç”±äºæ–‡æœ¬é™åˆ¶ï¼Œæˆ‘æ— æ³•ç›´æ¥ç»˜åˆ¶å›¾ç‰‡ï¼Œä½†å¯ä»¥æè¿°ä¸€ä¸ªå…¸å‹çš„æµç¨‹å›¾ï¼š</p>
<p>text</p>
<pre class="notranslate"><code class="notranslate">ç”¨æˆ·ç‚¹å‡»
   |
   v
JavaScriptäº‹ä»¶å¤„ç†
   |
   v
Axioså°è£…è¯·æ±‚
   |
   v
æµè§ˆå™¨è§£æURL
   |
   v
DNSæŸ¥è¯¢
   |
   v
å»ºç«‹TCPè¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰
   |
   v
TLSæ¡æ‰‹ï¼ˆå¦‚æœæ˜¯HTTPSï¼‰
   |
   v
å‘é€HTTPè¯·æ±‚
   |
   v
æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼ˆSpringBootï¼‰
   |
   v
æœåŠ¡å™¨è¿”å›HTTPå“åº”
   |
   v
æµè§ˆå™¨è§£æå“åº”
   |
   v
è§¦å‘å›è°ƒï¼Œæ›´æ–°é¡µé¢
</code></pre>
<p>æ¯ä¸ªæ­¥éª¤éƒ½æ¶‰åŠå¤æ‚çš„åº•å±‚æŠ€æœ¯ï¼Œä»åº”ç”¨ç¨‹åºä»£ç åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå†åˆ°ç¡¬ä»¶è®¾å¤‡ã€‚</p>
<h2>æ¡ˆä¾‹ï¼šAxiosè°ƒç”¨æµè§ˆå™¨API</h2>
<p>æˆ‘ä»¬ä»¥Axiosä½¿ç”¨XMLHttpRequestä¸ºä¾‹ï¼ˆè™½ç„¶Axioså¯èƒ½ä½¿ç”¨Fetchï¼Œä½†åŸç†ç±»ä¼¼ï¼‰ï¼š</p>
<ol>
<li>Axiosåˆ›å»ºä¸€ä¸ªXMLHttpRequestå¯¹è±¡ã€‚</li>
<li>è°ƒç”¨xhr.open(method, url)æ–¹æ³•ã€‚</li>
<li>è®¾ç½®è¯·æ±‚å¤´ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚</li>
<li>æ³¨å†Œonreadystatechangeäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
<li>è°ƒç”¨xhr.send(data)å‘é€è¯·æ±‚ã€‚</li>
</ol>
<p>æµè§ˆå™¨å†…éƒ¨ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰ä¼šé€šè¿‡IPCå°†ç½‘ç»œè¯·æ±‚å‘é€ç»™ç½‘ç»œè¿›ç¨‹ã€‚ç½‘ç»œè¿›ç¨‹è´Ÿè´£å®é™…çš„ç½‘ç»œé€šä¿¡ã€‚</p>
<p>å½“ç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°å“åº”æ—¶ï¼Œä¼šé€šè¿‡IPCå°†å“åº”æ•°æ®è¿”å›ç»™æ¸²æŸ“è¿›ç¨‹ã€‚æ¸²æŸ“è¿›ç¨‹ä¸­çš„XMLHttpRequestå¯¹è±¡ä¼šè§¦å‘onreadystatechangeäº‹ä»¶ï¼Œç„¶åAxiosçš„Promiseè§£æï¼Œè°ƒç”¨thenå›è°ƒã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šéµå®ˆåŒæºç­–ç•¥ï¼Œå¦‚æœéœ€è¦è·¨åŸŸï¼Œå¯èƒ½ä¼šå‘é€é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰ã€‚</p>
<h2>æ€»ç»“</h2>
<p>ä»ç”¨æˆ·ç‚¹å‡»åˆ°æ”¶åˆ°å“åº”ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¶‰åŠå¤šä¸ªå±‚çº§çš„æŠ€æœ¯åä½œã€‚ä»åº”ç”¨å±‚åˆ°ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€é“¾è·¯å±‚ã€ç‰©ç†å±‚ï¼Œæ¯ä¸€å±‚éƒ½æœ‰å„è‡ªçš„åè®®å’Œå®ç°ã€‚ç†è§£æ•´ä¸ªæµç¨‹æœ‰åŠ©äºæˆ‘ä»¬ä¼˜åŒ–æ€§èƒ½ã€è°ƒè¯•é—®é¢˜ã€‚</p>
</blockquote>
<h1>ğŸŒ HTTPè¯·æ±‚å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šä»ç‚¹å‡»åˆ°å“åº”çš„æ·±åº¦å‰–æ</h1>
<h2>ğŸ¯ æ•´ä½“æ¶æ„æ¦‚è§ˆ</h2>
<pre lang="mermaid" class="notranslate"><code class="notranslate">graph TB
    A[ç”¨æˆ·ç‚¹å‡»] --&gt; B[æµè§ˆå™¨UIè¿›ç¨‹]
    B --&gt; C[æ¸²æŸ“è¿›ç¨‹å¤„ç†]
    C --&gt; D[ç½‘ç»œè¿›ç¨‹]
    D --&gt; E[æ“ä½œç³»ç»Ÿåè®®æ ˆ]
    E --&gt; F[ç½‘ç»œç¡¬ä»¶]
    F --&gt; G[æœåŠ¡å™¨æ¥æ”¶]
    G --&gt; H[SpringBootå¤„ç†]
    H --&gt; I[æ•°æ®åº“/æœåŠ¡]
    I --&gt; H
    H --&gt; G
    G --&gt; F
    F --&gt; E
    E --&gt; D
    D --&gt; C
    C --&gt; B
    B --&gt; A
</code></pre>
<h2>1. ğŸ–±ï¸ ç”¨æˆ·äº¤äº’é˜¶æ®µ</h2>
<h3>1.1 ç‚¹å‡»äº‹ä»¶äº§ç”Ÿ</h3>
<pre lang="javascript" class="notranslate"><code class="notranslate">// ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®çš„å®Œæ•´é“¾æ¡
button.addEventListener('click', (event) =&gt; {
    // 1. ç¡¬ä»¶ä¸­æ–­
    // 2. æ“ä½œç³»ç»Ÿäº‹ä»¶å¤„ç†
    // 3. æµè§ˆå™¨äº‹ä»¶åˆ†å‘
    handleSubmit();
});
</code></pre>
<p><strong>ç¡¬ä»¶å±‚é¢</strong>ï¼š</p>
<ul>
<li><strong>é¼ æ ‡ç¡¬ä»¶</strong>ï¼šå…‰ç”µä¼ æ„Ÿå™¨/æœºæ¢°å¼€å…³äº§ç”Ÿç”µä¿¡å·</li>
<li><strong>USBæ§åˆ¶å™¨</strong>ï¼šå°†æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·</li>
<li><strong>ä¸­æ–­è¯·æ±‚(IRQ)</strong>ï¼šCPUæš‚åœå½“å‰ä»»åŠ¡å¤„ç†é¼ æ ‡ä¸­æ–­</li>
<li><strong>DMAä¼ è¾“</strong>ï¼šç›´æ¥å†…å­˜è®¿é—®ï¼Œé¿å…CPUé¢‘ç¹å‚ä¸</li>
</ul>
<p><strong>æ“ä½œç³»ç»Ÿå±‚é¢</strong>ï¼š</p>
<pre lang="c" class="notranslate"><code class="notranslate">// ç®€åŒ–ç‰ˆLinuxè¾“å…¥äº‹ä»¶å¤„ç†
static irqreturn_t mouse_interrupt(int irq, void *dev_id) {
    unsigned char packet[4];
    packet[0] = inb(MOUSE_PORT);
    packet[1] = inb(MOUSE_PORT + 1);
    packet[2] = inb(MOUSE_PORT + 2);
    
    // è§£æé¼ æ ‡æ•°æ®åŒ…
    int dx = (int)((packet[1] &amp; 0x0F) &lt;&lt; 8) | packet[2];
    int dy = (int)((packet[2] &amp; 0x0F) &lt;&lt; 8) | packet[3];
    
    // å†™å…¥è¾“å…¥è®¾å¤‡ç¼“å†²åŒº
    input_report_rel(mouse_dev, REL_X, dx);
    input_report_rel(mouse_dev, REL_Y, dy);
    input_sync(mouse_dev);
}
</code></pre>
<h3>1.2 æµè§ˆå™¨äº‹ä»¶å¤„ç†</h3>
<p><strong>æµè§ˆå™¨å¤šè¿›ç¨‹æ¶æ„</strong>ï¼š</p>
<pre class="notranslate"><code class="notranslate">Browser Process (æµè§ˆå™¨ä¸»è¿›ç¨‹)
    â†³ UI Thread (UIçº¿ç¨‹)
    â†³ IO Thread (IOçº¿ç¨‹)
    
Renderer Process (æ¸²æŸ“è¿›ç¨‹)
    â†³ Main Thread (ä¸»çº¿ç¨‹) â†’ JavaScriptæ‰§è¡Œ
    â†³ Compositor Thread (åˆæˆçº¿ç¨‹)
    
GPU Process (GPUè¿›ç¨‹)
Network Process (ç½‘ç»œè¿›ç¨‹)
</code></pre>
<h2>2. ğŸ”„ Axiosè¯·æ±‚å‘èµ·é˜¶æ®µ</h2>
<h3>2.1 Axioså†…éƒ¨å®ç°</h3>
<pre lang="javascript" class="notranslate"><code class="notranslate">// Axiosæ ¸å¿ƒè¯·æ±‚æµç¨‹
class Axios {
    request(config) {
        // 1. åˆå¹¶é…ç½®
        const mergedConfig = mergeConfig(this.defaults, config);
        
        // 2. æ‹¦æˆªå™¨å¤„ç†
        const chain = [];
        chain.unshift(...this.interceptors.request.handlers);
        chain.push(dispatchRequest, undefined);
        chain.push(...this.interceptors.response.handlers);
        
        // 3. æ‰§è¡Œé“¾å¼è°ƒç”¨
        let promise = Promise.resolve(mergedConfig);
        while (chain.length) {
            promise = promise.then(chain.shift(), chain.shift());
        }
        return promise;
    }
}

// å®é™…è¯·æ±‚åˆ†å‘
function dispatchRequest(config) {
    // é€‚é…å™¨æ¨¡å¼ï¼šæµè§ˆå™¨ç¯å¢ƒä½¿ç”¨XMLHttpRequest
    const adapter = config.adapter || defaults.adapter;
    return adapter(config).then(
        response =&gt; transformResponseData(response),
        error =&gt; transformError(error)
    );
}
</code></pre>
<h3>2.2 æµè§ˆå™¨ç½‘ç»œAPIè°ƒç”¨</h3>
<pre lang="javascript" class="notranslate"><code class="notranslate">// XMLHttpRequeståº•å±‚å®ç°
class XMLHttpRequest {
    open(method, url) {
        // è°ƒç”¨C++å®ç°çš„æµè§ˆå™¨ç½‘ç»œæ ˆ
        this._nativeXHR.open(method, url);
    }
    
    send(data) {
        // 1. å‚æ•°éªŒè¯å’Œé¢„å¤„ç†
        this._validateSendParameters();
        
        // 2. è°ƒç”¨åº•å±‚ç½‘ç»œæ¥å£
        this._nativeXHR.send(
            this._processData(data),
            this._getRequestHeaders()
        );
        
        // 3. æ³¨å†Œäº‹ä»¶ç›‘å¬
        this._setupEventListeners();
    }
}
</code></pre>
<h2>3. ğŸŒ æµè§ˆå™¨ç½‘ç»œæ ˆå¤„ç†</h2>
<h3>3.1 ç½‘ç»œè¿›ç¨‹å¤„ç†æµç¨‹</h3>
<pre class="notranslate"><code class="notranslate">æ¸²æŸ“è¿›ç¨‹ (Renderer Process)
    â†“ IPC (è¿›ç¨‹é—´é€šä¿¡)
ç½‘ç»œè¿›ç¨‹ (Network Process)
    â†“ è°ƒç”¨æ“ä½œç³»ç»ŸAPI
æ“ä½œç³»ç»Ÿç½‘ç»œæ ˆ
    â†“ ç¡¬ä»¶é©±åŠ¨
ç½‘ç»œæ¥å£å¡ (NIC)
</code></pre>
<h3>3.2 æµè§ˆå™¨ç½‘ç»œæ ˆè¯¦ç»†æµç¨‹</h3>
<pre lang="cpp" class="notranslate"><code class="notranslate">// ç®€åŒ–ç‰ˆChromiumç½‘ç»œæ ˆå¤„ç†
class NetworkService {
    void StartRequest(const URLRequest&amp; request) {
        // 1. ç¼“å­˜æ£€æŸ¥
        if (CheckCache(request)) {
            return ServeFromCache(request);
        }
        
        // 2. Cookieå¤„ç†
        auto cookies = cookie_store_-&gt;GetAllCookiesForURL(request.url);
        
        // 3. DNSé¢„è§£æ
        HostResolver::ResolveHost(
            request.url.host(),
            [this, request](IPAddress address) {
                // 4. å»ºç«‹è¿æ¥
                CreateTransportSocket(address, request);
            }
        );
    }
    
    void CreateTransportSocket(IPAddress address, const URLRequest&amp; request) {
        // 5. Socketåˆ›å»º
        auto socket = socket_factory_-&gt;CreateTCPSocket();
        
        // 6. TLS/SSLæ¡æ‰‹ï¼ˆHTTPSï¼‰
        if (request.url.scheme() == "https") {
            SSLClientSocket::Connect(socket, request);
        } else {
            // 7. TCPè¿æ¥å»ºç«‹
            socket-&gt;Connect(address, request.url.EffectiveIntPort());
        }
        
        // 8. HTTPè¯·æ±‚å‘é€
        SendHTTPRequest(socket, request);
    }
}
</code></pre>
<h2>4. ğŸ’» æ“ä½œç³»ç»Ÿç½‘ç»œåè®®æ ˆ</h2>
<h3>4.1 TCP/IPåè®®æ ˆå¤„ç†</h3>
<pre lang="c" class="notranslate"><code class="notranslate">// Linuxå†…æ ¸TCP/IPå¤„ç†ç®€åŒ–æµç¨‹
// net/ipv4/tcp_ipv4.c

// TCPè¿æ¥å»ºç«‹
int tcp_v4_connect(struct sock *sk, struct sockaddr *uaddr, int addr_len) {
    // 1. è·¯ç”±æŸ¥æ‰¾
    struct rtable *rt = ip_route_connect(...);
    
    // 2. TCPä¸‰æ¬¡æ¡æ‰‹
    tcp_connect(sk);
    
    // 3. æ·»åŠ åˆ°è¿æ¥è¡¨
    inet_hash_connect(&amp;tcp_hashinfo, sk);
}

// æ•°æ®å‘é€
int tcp_sendmsg(struct sock *sk, struct msghdr *msg, size_t size) {
    // 1. æ•°æ®åˆ†æ®µ
    struct sk_buff *skb = alloc_skb_with_frags(...);
    
    // 2. TCPå¤´éƒ¨å°è£…
    tcp_build_and_update_options(skb);
    
    // 3. æ‹¥å¡æ§åˆ¶
    tcp_cwnd_test(sk, skb);
    
    // 4. äº¤ç»™IPå±‚
    return ip_queue_xmit(sk, skb, &amp;fl);
}
</code></pre>
<h3>4.2 æ•°æ®åŒ…å°è£…æµç¨‹</h3>
<pre class="notranslate"><code class="notranslate">åº”ç”¨å±‚æ•°æ® (HTTPè¯·æ±‚)
    â†“ æ·»åŠ TCPå¤´éƒ¨
TCPæ®µ (Segment)
    â†“ æ·»åŠ IPå¤´éƒ¨  
IPæ•°æ®åŒ… (Packet)
    â†“ æ·»åŠ ä»¥å¤ªç½‘å¤´éƒ¨
ä»¥å¤ªç½‘å¸§ (Frame)
    â†“ ç‰©ç†ä¿¡å·
ç½‘ç»œä¼ è¾“
</code></pre>
<h2>5. ğŸ”Œ ç½‘ç»œç¡¬ä»¶ä¼ è¾“</h2>
<h3>5.1 ç½‘å¡å·¥ä½œåŸç†</h3>
<pre lang="c" class="notranslate"><code class="notranslate">// ç½‘å¡é©±åŠ¨æ•°æ®å‘é€
struct net_device_ops {
    int (*ndo_start_xmit)(struct sk_buff *skb, struct net_device *dev);
};

// æ•°æ®å‘é€å‡½æ•°
int netdev_start_xmit(struct sk_buff *skb, struct net_device *dev) {
    // 1. DMAæè¿°ç¬¦è®¾ç½®
    struct dma_desc *desc = get_tx_desc(dev);
    
    // 2. å†…å­˜æ˜ å°„
    dma_map_single(dev-&gt;dev, skb-&gt;data, skb-&gt;len, DMA_TO_DEVICE);
    
    // 3. è§¦å‘å‘é€
    writel(desc-&gt;addr, dev-&gt;base_addr + TX_REG);
    
    // 4. ä¸­æ–­å¤„ç†å®Œæˆ
    request_irq(dev-&gt;irq, netdev_interrupt, IRQF_SHARED, dev-&gt;name, dev);
}
</code></pre>
<h3>5.2 ç‰©ç†å±‚ä¼ è¾“</h3>
<ul>
<li><strong>ç”µä¿¡å·ä¼ è¾“</strong>ï¼ˆç½‘çº¿ï¼‰ï¼šç”µå‹å˜åŒ–è¡¨ç¤º0/1</li>
<li><strong>å…‰ä¿¡å·ä¼ è¾“</strong>ï¼ˆå…‰çº¤ï¼‰ï¼šå…‰è„‰å†²è¡¨ç¤º0/1</li>
<li><strong>æ— çº¿ä¼ è¾“</strong>ï¼ˆWiFiï¼‰ï¼šç”µç£æ³¢è°ƒåˆ¶</li>
</ul>
<h2>6. ğŸ–¥ï¸ æœåŠ¡å™¨ç«¯å¤„ç†</h2>
<h3>6.1 æœåŠ¡å™¨ç½‘ç»œæ ˆæ¥æ”¶</h3>
<pre lang="java" class="notranslate"><code class="notranslate">// SpringBootå†…åµŒTomcatæ¥æ”¶è¯·æ±‚
public class TomcatEmbeddedServletContainer {
    
    // NIOç«¯ç‚¹æ¥æ”¶è¿æ¥
    protected class Acceptor implements Runnable {
        public void run() {
            while (running) {
                // 1. æ¥å—è¿æ¥
                SocketChannel socket = serverSock.accept();
                
                // 2. æ³¨å†Œåˆ°Poller
                getPoller().register(socket);
            }
        }
    }
    
    // Pollerå¤„ç†IOäº‹ä»¶
    protected class Poller implements Runnable {
        public void run() {
            while (true) {
                // 3. é€‰æ‹©å°±ç»ªçš„é€šé“
                int keyCount = selector.select();
                
                // 4. å¤„ç†IOäº‹ä»¶
                for (SelectionKey key : selector.selectedKeys()) {
                    if (key.isReadable()) {
                        // 5. è¯»å–HTTPè¯·æ±‚
                        processSocket(socket, SocketStatus.OPEN_READ);
                    }
                }
            }
        }
    }
}
</code></pre>
<h3>6.2 SpringBootè¯·æ±‚å¤„ç†</h3>
<pre lang="java" class="notranslate"><code class="notranslate">// DispatcherServletè¯·æ±‚åˆ†å‘
public class DispatcherServlet extends FrameworkServlet {
    
    protected void doDispatch(HttpServletRequest request, 
                             HttpServletResponse response) throws Exception {
        // 1. è·å–HandlerMapping
        HandlerExecutionChain mappedHandler = getHandler(request);
        
        // 2. è·å–HandlerAdapter
        HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());
        
        // 3. æ‰§è¡Œæ‹¦æˆªå™¨å‰ç½®å¤„ç†
        if (!mappedHandler.applyPreHandle(request, response)) return;
        
        // 4. å®é™…è°ƒç”¨Controlleræ–¹æ³•
        ModelAndView mv = ha.handle(request, response, mappedHandler.getHandler());
        
        // 5. æ‰§è¡Œæ‹¦æˆªå™¨åç½®å¤„ç†
        mappedHandler.applyPostHandle(request, response, mv);
        
        // 6. æ¸²æŸ“è§†å›¾/è¿”å›JSON
        processDispatchResult(request, response, mappedHandler, mv, null);
    }
}

// å‚æ•°è§£æå™¨å·¥ä½œæµç¨‹
public class RequestParamMethodArgumentResolver implements HandlerMethodArgumentResolver {
    
    public Object resolveArgument(MethodParameter parameter, 
                                 ModelAndViewContainer mavContainer,
                                 NativeWebRequest webRequest, 
                                 WebDataBinderFactory binderFactory) throws Exception {
        
        // 1. è·å–å‚æ•°åç§°
        String name = getParameterName(parameter);
        
        // 2. ä»ä¸åŒä½ç½®è§£æå‚æ•°
        Object arg;
        if (parameter.hasParameterAnnotation(PathVariable.class)) {
            // è·¯å¾„å‚æ•°
            arg = resolvePathVariable(name, parameter, webRequest);
        } else if (parameter.hasParameterAnnotation(RequestParam.class)) {
            // æŸ¥è¯¢å‚æ•°
            arg = resolveRequestParam(name, parameter, webRequest);
        } else if (parameter.hasParameterAnnotation(RequestBody.class)) {
            // è¯·æ±‚ä½“
            arg = resolveRequestBody(parameter, webRequest);
        } else {
            // å…¶ä»–å‚æ•°è§£æ
            arg = resolveDefaultValue(name, parameter, webRequest);
        }
        
        // 3. æ•°æ®ç»‘å®šå’ŒéªŒè¯
        if (binderFactory != null) {
            WebDataBinder binder = binderFactory.createBinder(webRequest, null, name);
            arg = binder.convertIfNecessary(arg, parameter.getParameterType(), parameter);
        }
        
        return arg;
    }
}
</code></pre>
<h2>7. ğŸ“Š æ•°æ®åº“äº¤äº’</h2>
<h3>7.1 æ•°æ®åº“è¿æ¥å¤„ç†</h3>
<pre lang="java" class="notranslate"><code class="notranslate">// Spring Data JPAæ•°æ®åº“äº¤äº’
@Repository
public class UserRepositoryImpl implements UserRepository {
    
    @PersistenceContext
    private EntityManager entityManager;
    
    @Transactional
    public User save(User user) {
        // 1. è·å–æ•°æ®åº“è¿æ¥
        Connection conn = getConnectionFromPool();
        
        try {
            // 2. åˆ›å»ºPreparedStatement
            PreparedStatement stmt = conn.prepareStatement(
                "INSERT INTO users (username, email) VALUES (?, ?)",
                Statement.RETURN_GENERATED_KEYS
            );
            
            // 3. å‚æ•°ç»‘å®š
            stmt.setString(1, user.getUsername());
            stmt.setString(2, user.getEmail());
            
            // 4. æ‰§è¡ŒSQL
            int affectedRows = stmt.executeUpdate();
            
            // 5. å¤„ç†ç»“æœ
            if (affectedRows &gt; 0) {
                ResultSet rs = stmt.getGeneratedKeys();
                if (rs.next()) {
                    user.setId(rs.getLong(1));
                }
            }
            
            return user;
        } finally {
            // 6. é‡Šæ”¾è¿æ¥å›è¿æ¥æ± 
            releaseConnection(conn);
        }
    }
}
</code></pre>
<h2>8. ğŸ”„ å“åº”è¿”å›æµç¨‹</h2>
<h3>8.1 å“åº”æ•°æ®æµ</h3>
<pre lang="java" class="notranslate"><code class="notranslate">// SpringBootå“åº”å¤„ç†
@RestController
public class UserController {
    
    @PostMapping("/users")
    public ResponseEntity&lt;UserDTO&gt; createUser(@RequestBody @Valid UserCreateRequest request) {
        // 1. ä¸šåŠ¡å¤„ç†
        User user = userService.createUser(request);
        
        // 2. è½¬æ¢ä¸ºDTO
        UserDTO userDTO = userMapper.toDTO(user);
        
        // 3. æ„å»ºå“åº”
        return ResponseEntity.status(HttpStatus.CREATED)
               .header("Location", "/users/" + user.getId())
               .body(userDTO);
    }
}

// HttpMessageConverterå“åº”è½¬æ¢
public class MappingJackson2HttpMessageConverter implements HttpMessageConverter&lt;Object&gt; {
    
    protected void writeInternal(Object object, 
                                Type type, 
                                HttpOutputMessage outputMessage) throws Exception {
        
        // 1. è·å–è¾“å‡ºæµ
        OutputStream outputStream = outputMessage.getBody();
        
        // 2. JSONåºåˆ—åŒ–
        ObjectMapper mapper = getObjectMapper();
        mapper.writeValue(outputStream, object);
        
        // 3. åˆ·æ–°ç¼“å†²åŒº
        outputStream.flush();
    }
}
</code></pre>
<h3>8.2 Tomcatå“åº”å‘é€</h3>
<pre lang="java" class="notranslate"><code class="notranslate">// Tomcatå“åº”è¾“å‡º
public class Response implements HttpServletResponse {
    
    public ServletOutputStream getOutputStream() {
        // è¿”å›åŒ…è£…äº†Socketçš„è¾“å‡ºæµ
        return new CoyoteOutputStream(outputBuffer);
    }
    
    protected void doWrite(ByteBuffer chunk) throws IOException {
        // é€šè¿‡SocketChannelå‘é€æ•°æ®
        socketWrapper.write(isBlocking(), chunk);
    }
}

// åº•å±‚Socketå†™å…¥
public class NioChannel {
    public int write(ByteBuffer buf) throws IOException {
        // è°ƒç”¨Java NIO
        return socketChannel.write(buf);
    }
}
</code></pre>
<h2>9. ğŸ“¨ æµè§ˆå™¨å“åº”å¤„ç†</h2>
<h3>9.1 ç½‘ç»œè¿›ç¨‹å“åº”è§£æ</h3>
<pre lang="cpp" class="notranslate"><code class="notranslate">// Chromiumç½‘ç»œå“åº”å¤„ç†
class URLRequest {
    void OnResponseStarted(...) {
        // 1. è§£æHTTPå“åº”å¤´
        ParseResponseHeaders(response_info_-&gt;headers);
        
        // 2. å¤„ç†é‡å®šå‘
        if (IsRedirectResponse()) {
            StartRedirect();
            return;
        }
        
        // 3. é€šçŸ¥æ¸²æŸ“è¿›ç¨‹
        delegate_-&gt;OnResponseStarted(this);
    }
    
    void ReadData() {
        // 4. è¯»å–å“åº”ä½“
        int bytes_read = ReadDataToBuffer();
        
        // 5. æ•°æ®è§£ç ï¼ˆgzipç­‰ï¼‰
        if (need_decompression_) {
            bytes_read = filter_-&gt;ReadData(filtered_buffer);
        }
        
        // 6. ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹
        delegate_-&gt;OnReadCompleted(this, bytes_read);
    }
}
</code></pre>
<h3>9.2 æ¸²æŸ“è¿›ç¨‹å¤„ç†å“åº”</h3>
<pre lang="javascript" class="notranslate"><code class="notranslate">// XMLHttpRequestå“åº”å¤„ç†
class XMLHttpRequest {
    _onNetworkResponse(response) {
        // 1. æ›´æ–°readyState
        this.readyState = this.HEADERS_RECEIVED;
        this.dispatchEvent(new Event('readystatechange'));
        
        // 2. æ£€æŸ¥çŠ¶æ€ç 
        if (this.status &gt;= 200 &amp;&amp; this.status &lt; 300) {
            // 3. è¯»å–å“åº”æ•°æ®
            this._readResponseBody();
        } else {
            this._handleError();
        }
    }
    
    _readResponseBody() {
        // 4. æ ¹æ®responseTypeå¤„ç†æ•°æ®
        switch (this.responseType) {
            case '':
            case 'text':
                this.responseText = decodeText(this._rawData);
                break;
            case 'json':
                this.response = JSON.parse(decodeText(this._rawData));
                break;
            case 'arraybuffer':
                this.response = this._rawData;
                break;
        }
        
        // 5. è§¦å‘loadäº‹ä»¶
        this.readyState = this.DONE;
        this.dispatchEvent(new Event('load'));
    }
}
</code></pre>
<h2>10. ğŸ¯ Axios Promiseè§£æ</h2>
<h3>10.1 å“åº”æ•°æ®è½¬æ¢</h3>
<pre lang="javascript" class="notranslate"><code class="notranslate">// Axioså“åº”å¤„ç†é“¾
function transformResponseData(response) {
    // 1. æ•°æ®è½¬æ¢
    if (response.config.transformResponse) {
        response.data = transformData(
            response.data,
            response.headers,
            response.config.transformResponse
        );
    }
    
    // 2. é€‚é…å™¨ç‰¹å®šå¤„ç†
    if (response.config.adapter) {
        response.data = response.config.adapter.defaults.transformResponse[0](
            response.data
        );
    }
    
    // 3. è¿”å›æœ€ç»ˆæ•°æ®
    return response;
}

// æ‹¦æˆªå™¨åç½®å¤„ç†
function onFulfilled(response) {
    // æ‰§è¡Œå“åº”æ‹¦æˆªå™¨
    responseInterceptorChain.forEach(interceptor =&gt; {
        response = interceptor.fulfilled(response);
    });
    
    // è§£æPromise
    return Promise.resolve(response);
}
</code></pre>
<h2>ğŸ“Š å®Œæ•´æµç¨‹æ—¶åºå›¾</h2>
<pre lang="mermaid" class="notranslate"><code class="notranslate">sequenceDiagram
    participant U as ç”¨æˆ·
    participant B as æµè§ˆå™¨UI
    participant R as æ¸²æŸ“è¿›ç¨‹
    participant N as ç½‘ç»œè¿›ç¨‹
    participant OS as æ“ä½œç³»ç»Ÿ
    participant HW as ç½‘ç»œç¡¬ä»¶
    participant S as æœåŠ¡å™¨
    participant DB as æ•°æ®åº“

    U-&gt;&gt;B: ç‚¹å‡»æäº¤æŒ‰é’®
    B-&gt;&gt;R: IPCäº‹ä»¶ä¼ é€’
    R-&gt;&gt;R: JavaScriptæ‰§è¡Œ(Axios)
    R-&gt;&gt;N: IPCç½‘ç»œè¯·æ±‚
    N-&gt;&gt;OS: ç³»ç»Ÿè°ƒç”¨(socket)
    OS-&gt;&gt;HW: é©±åŠ¨è°ƒç”¨
    HW-&gt;&gt;S: ç½‘ç»œä¼ è¾“
    S-&gt;&gt;S: SpringBootå¤„ç†
    S-&gt;&gt;DB: æ•°æ®åº“æ“ä½œ
    DB-&gt;&gt;S: è¿”å›æ•°æ®
    S-&gt;&gt;HW: å“åº”è¿”å›
    HW-&gt;&gt;OS: ç¡¬ä»¶ä¸­æ–­
    OS-&gt;&gt;N: æ•°æ®å°±ç»ª
    N-&gt;&gt;R: IPCå“åº”æ•°æ®
    R-&gt;&gt;R: Promiseè§£æ
    R-&gt;&gt;B: æ›´æ–°UI
    B-&gt;&gt;U: æ˜¾ç¤ºç»“æœ
</code></pre>
<h2>ğŸ”§ æ€§èƒ½ä¼˜åŒ–å…³é”®ç‚¹</h2>
<h3>ç½‘ç»œå±‚é¢ä¼˜åŒ–</h3>
<ol>
<li><strong>DNSé¢„è§£æ</strong>ï¼š<code class="notranslate">&lt;link rel="dns-prefetch"&gt;</code></li>
<li><strong>TCPé¢„è¿æ¥</strong>ï¼š<code class="notranslate">&lt;link rel="preconnect"&gt;</code></li>
<li><strong>HTTP/2å¤šè·¯å¤ç”¨</strong>ï¼šå‡å°‘è¿æ¥å»ºç«‹å¼€é”€</li>
<li><strong>QUICåè®®</strong>ï¼šHTTP/3çš„0-RTTè¿æ¥</li>
</ol>
<h3>æµè§ˆå™¨å±‚é¢ä¼˜åŒ–</h3>
<ol>
<li><strong>è¯·æ±‚åˆå¹¶</strong>ï¼šå‡å°‘HTTPè¯·æ±‚æ•°é‡</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šåˆç†è®¾ç½®Cache-Control</li>
<li><strong>å‹ç¼©ä¼ è¾“</strong>ï¼šgzip/brotliå‹ç¼©</li>
<li><strong>CDNåŠ é€Ÿ</strong>ï¼šå‡å°‘ç½‘ç»œå»¶è¿Ÿ</li>
</ol>
<h3>æœåŠ¡å™¨å±‚é¢ä¼˜åŒ–</h3>
<ol>
<li><strong>è¿æ¥æ± </strong>ï¼šæ•°æ®åº“è¿æ¥å¤ç”¨</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šé¿å…çº¿ç¨‹é˜»å¡</li>
<li><strong>ç¼“å­˜å±‚</strong>ï¼šRedisç­‰ç¼“å­˜çƒ­ç‚¹æ•°æ®</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåˆ†å¸ƒå¼å¤„ç†è¯·æ±‚</li>
</ol>
<h2>ğŸ¯ æ€»ç»“</h2>
<p>æ•´ä¸ªHTTPè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸæ¶‰åŠä»<strong>ç”¨æˆ·äº¤äº’</strong>åˆ°<strong>ç¡¬ä»¶ä¼ è¾“</strong>ï¼Œå†åˆ°<strong>æœåŠ¡å™¨å¤„ç†</strong>å’Œ<strong>å“åº”è¿”å›</strong>çš„å®Œæ•´é“¾æ¡ã€‚æ¯ä¸ªç¯èŠ‚éƒ½æœ‰å¤æ‚çš„åº•å±‚æŠ€æœ¯æ”¯æ’‘ï¼š</p>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šæµè§ˆå™¨å¤šè¿›ç¨‹æ¶æ„ã€äº‹ä»¶å¾ªç¯ã€APIè°ƒç”¨</li>
<li><strong>ç½‘ç»œ</strong>ï¼šTCP/IPåè®®æ ˆã€è·¯ç”±é€‰æ‹©ã€æ‹¥å¡æ§åˆ¶</li>
<li><strong>ç¡¬ä»¶</strong>ï¼šä¸­æ–­å¤„ç†ã€DMAä¼ è¾“ã€ä¿¡å·è°ƒåˆ¶</li>
<li><strong>åç«¯</strong>ï¼šIOå¤šè·¯å¤ç”¨ã€çº¿ç¨‹æ± ã€æ•°æ®åº“è¿æ¥æ± </li>
</ul>
<p>ç†è§£è¿™ä¸ªå®Œæ•´æµç¨‹æœ‰åŠ©äºæˆ‘ä»¬ï¼š</p>
<ol>
<li><strong>å®šä½æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šå‡†ç¡®æ‰¾åˆ°æ…¢è¯·æ±‚çš„åŸå› </li>
<li><strong>ä¼˜åŒ–ç³»ç»Ÿè®¾è®¡</strong>ï¼šé’ˆå¯¹è–„å¼±ç¯èŠ‚è¿›è¡Œä¼˜åŒ–</li>
<li><strong>è°ƒè¯•å¤æ‚é—®é¢˜</strong>ï¼šè·¨å±‚è°ƒè¯•ç½‘ç»œå’Œç³»ç»Ÿé—®é¢˜</li>
<li><strong>è®¾è®¡é«˜å¹¶å‘ç³»ç»Ÿ</strong>ï¼šç†è§£å„ç¯èŠ‚çš„å¹¶å‘å¤„ç†èƒ½åŠ›</li>
</ol>
<p>è¿™ç¡®å®æ˜¯ä¸€ä¸ªä»<strong>ç‚¹å‡»åˆ°åƒç´ </strong>çš„å®Œæ•´æŠ€æœ¯ä¹‹æ—…ï¼ ğŸš€</p></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">è¯„è®º</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright Â© <span id="copyrightYear"></span> <a href="https://luminku.github.io">å¸ƒè°·åšå®¢</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="ç½‘ç«™è¿è¡Œ"+diffDay+"å¤©"+" â€¢ ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","LuminKu/luminku.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>


</html>
